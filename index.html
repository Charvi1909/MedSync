<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedSync - Your Medical Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style> /* App shell: sidebar + main content */ .app-layout { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; } /* Ensure sidebar occupies the left column */ .sidebar { width: 260px; } /* Main content area */ .main-content { padding: 16px 20px; overflow: auto; } /* Make QR preview stand out on dark themes */ #qr-container { background: #ffffff; } </style>[2][1]
</head>
<body>
    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Main Layout -->
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-heartbeat"></i> MedSync</h2>
            </div>
            <ul class="sidebar-menu">
                <li>
                    <a href="#" class="nav-link active" data-page="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link" data-page="lab-results">
                        <i class="fas fa-flask"></i>
                        <span>Lab Results</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link" data-page="medications">
                        <i class="fas fa-pills"></i>
                        <span>Medications</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link" data-page="profile">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </a>
                </li>
                <li> <a href="#" class="nav-link" data-section="emergency-qr"> <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"> <path d="M12 2l3 6 6 1-4.5 4.4L18 20l-6-3-6 3 1.5-6.6L3 9l6-1 3-6z"/> </svg> <span>Emergency QR</span> </a> </li>[1][2][3]
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 id="page-title">Dashboard</h1>
                <div class="user-greeting">
                    <span>Welcome back, <strong id="user-name">Sarah</strong></span>
                </div>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <!-- Overview Cards (3 cards only) -->
                <div class="overview-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Last Test Date</h3>
                            <p id="last-test-date">Loading...</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Active Medications</h3>
                            <p id="active-meds">Loading...</p>
                        </div>
                    </div>
                    <div class="stat-card success-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Consistency Rate</h3>
                            <p id="consistency-rate">Loading...</p>
                        </div>
                    </div>
                </div>

                <!-- Large AI Health Summary Box -->
                <div class="ai-health-summary-box">
                    <div class="card">
                        <div class="card__body">
                            <div class="ai-summary-header">
                                <div class="stat-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <h3>AI Health Summary</h3>
                            </div>
                            <div class="ai-summary-text">
                                <p id="ai-health-summary">Loading...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Medications -->
                <div class="today-medications">
                    <h3>Today's Medications</h3>
                    <div class="medication-list" id="today-meds-list">
                        <!-- Medications will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Lab Results Page -->
            <div id="lab-results-page" class="page">
                <!-- Upload Section -->
                <div class="upload-section">
                    <div class="card upload-card">
                        <div class="card__body">
                            <h3>Upload New Lab Report</h3>
                            <div class="upload-zone" id="lab-upload-zone">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop your PDF lab report here or <button class="upload-btn" id="lab-upload-btn">browse files</button></p>
                                <input type="file" id="lab-file-input" accept=".pdf" style="display: none;">
                            </div>
                            <div class="upload-progress hidden" id="lab-upload-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="lab-progress-fill"></div>
                                </div>
                                <p>Processing your lab report...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Summary Section -->
                <div class="ai-summary-section">
                    <div class="card">
                        <div class="card__body">
                            <h3><i class="fas fa-robot"></i> AI Analysis of Latest Report</h3>
                            <div class="ai-summary-content">
                                <div class="test-metadata">
                                    <p class="test-date">Test Date: <span id="current-test-date">September 20, 2025</span></p>
                                    <p class="test-type">Test Type: <span id="current-test-type">Complete Blood Count (CBC)</span></p>
                                </div>
                                <div class="ai-analysis-text">
                                    <p id="current-analysis-summary">Your recent CBC results indicate mild anemia with low hemoglobin and hematocrit levels, while platelets are slightly elevated suggesting possible inflammation. Your iron supplement regimen appears to be helping, and consistency with medications has improved. Continue current treatment plan and consider adding vitamin C to enhance iron absorption.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History of AI Summaries -->
                <div class="ai-history-section">
                    <div class="card">
                        <div class="card__body">
                            <h3><i class="fas fa-history"></i> History of AI Summaries</h3>
                            <div class="ai-history-list" id="ai-history-list">
                                <!-- History will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Medications Page -->
            <div id="medications-page" class="page">
                <div class="medications-header">
                    <button class="btn btn--primary" id="add-medication-btn">
                        <i class="fas fa-plus"></i> Add Medication
                    </button>
                </div>

                <div class="medications-grid" id="medications-grid">
                    <!-- Medication cards will be populated by JavaScript -->
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="page">
                <div class="profile-form-container">
                    <form id="profile-form" class="profile-form">
                        <!-- Basic Information -->
                        <div class="form-section">
                            <h3>Basic Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="profile-name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Age</label>
                                    <input type="number" class="form-control" id="profile-age" min="1" max="120">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Height</label>
                                    <input type="text" class="form-control" id="profile-height" placeholder="5'6&quot;">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Weight</label>
                                    <input type="text" class="form-control" id="profile-weight" placeholder="145 lbs">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Gender</label>
                                    <select class="form-control" id="profile-gender">
                                        <option value="">Select gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                        <option value="Prefer not to say">Prefer not to say</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Blood Type</label>
                                    <select class="form-control" id="profile-blood-type">
                                        <option value="">Select blood type</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Medical Information -->
                        <div class="form-section">
                            <h3>Medical Information</h3>
                            <div class="form-group">
                                <label class="form-label">Medical Conditions</label>
                                <div class="tags-container" id="conditions-container">
                                    <!-- Tags will be populated by JavaScript -->
                                </div>
                                <input type="text" class="form-control" id="conditions-input" placeholder="Type condition and press Enter">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Allergies</label>
                                <div class="tags-container" id="allergies-container">
                                    <!-- Tags will be populated by JavaScript -->
                                </div>
                                <input type="text" class="form-control" id="allergies-input" placeholder="Type allergy and press Enter">
                            </div>
                        </div>

                        <!-- Emergency Contact -->
                        <div class="form-section">
                            <h3>Emergency Contact</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Contact Name</label>
                                    <input type="text" class="form-control" id="emergency-name">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relationship</label>
                                    <input type="text" class="form-control" id="emergency-relation">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="emergency-phone">
                            </div>
                        </div>

                        <!-- Notification Preferences -->
                        <div class="form-section">
                            <h3>Notification Preferences</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="email-reminders">
                                    <span class="checkmark"></span>
                                    Email Reminders
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="push-notifications">
                                    <span class="checkmark"></span>
                                    Push Notifications
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sound-alerts">
                                    <span class="checkmark"></span>
                                    Sound Alerts
                                </label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn--primary btn--lg">
                                <span class="btn-text">Save Profile</span>
                                <i class="fas fa-spinner fa-spin btn-loader hidden"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Medication Modal -->
    <div class="modal hidden" id="add-medication-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Medication</h3>
                <button class="modal-close" id="modal-close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="medication-form">
                    <div class="form-group">
                        <label class="form-label">Medication Name</label>
                        <input type="text" class="form-control" id="med-name" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Dosage</label>
                            <input type="number" class="form-control" id="med-dosage" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Unit</label>
                            <select class="form-control" id="med-unit" required>
                                <option value="">Select unit</option>
                                <option value="mg">mg</option>
                                <option value="ml">ml</option>
                                <option value="tablets">tablets</option>
                                <option value="IU">IU</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Frequency</label>
                        <select class="form-control" id="med-frequency" required>
                            <option value="">Select frequency</option>
                            <option value="once_daily">Once daily</option>
                            <option value="twice_daily">Twice daily</option>
                            <option value="three_times_daily">Three times daily</option>
                            <option value="as_needed">As needed</option>
                        </select>
                    </div>
                    <div class="form-group" id="times-group">
                        <label class="form-label">Times</label>
                        <div id="time-inputs">
                            <!-- Time inputs will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Instructions</label>
                        <textarea class="form-control" id="med-instructions" rows="3" placeholder="Special instructions..."></textarea>
                    </div>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="med-with-food">
                            <span class="checkmark"></span>
                            Take with food
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="modal-cancel-btn">Cancel</button>
                <button type="submit" class="btn btn--primary" form="medication-form">Add Medication</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal hidden" id="confirmation-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirmation-title">Confirm Action</h3>
                <button class="modal-close" id="confirmation-close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirmation-message">Are you sure you want to proceed?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="confirmation-cancel-btn">Cancel</button>
                <button type="button" class="btn btn--primary" id="confirmation-confirm-btn">Confirm</button>
            </div>
        </div>
    </div>
    <section id="emergency-qr" class="section">
  <header class="section-header">
    <h1>Emergency QR</h1>
    <button class="btn btn-primary" id="btn-generate-qr">Generate QR</button>
  </header>

  <div class="card">
    <h2>Included Details</h2>
    <p class="text-sm">This QR encodes essential info for first responders and doctors. Keep it up to date.</p>

    <div class="grid" style="grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap: 1rem;">
      <div class="p-md" style="background: var(--bg-tertiary); border-radius: 8px;">
        <h3>Patient</h3>
        <ul class="text-sm">
          <li>Name, Age, Gender, Blood Type</li>
          <li>Conditions, Allergies</li>
          <li>Medications (name, dose, schedule)</li>
          <li>Emergency Contact</li>
        </ul>
      </div>
      <div class="p-md" style="background: var(--bg-tertiary); border-radius: 8px;">
        <h3>Latest Labs</h3>
        <ul class="text-sm">
          <li>Test Type, Date</li>
          <li>Key parameters (value, status)</li>
        </ul>
      </div>
      <div class="p-md" style="background: var(--bg-tertiary); border-radius: 8px;">
        <h3>Safety</h3>
        <ul class="text-sm">
          <li>Only essentials, compact JSON</li>
          <li>Optional password hint field</li>
          <li>QR version auto‑optimized</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>QR Preview</h2>
    <div class="flex gap-md items-center">
      <div id="qr-container" style="padding: 12px; background:#fff; border:1px solid var(--border-color); border-radius:8px;">
        <div id="qr-canvas"></div>
      </div>

      <div>
        <button class="btn btn-secondary" id="btn-download-qr">Download PNG</button>
        <button class="btn btn-secondary" id="btn-print-qr">Print</button>
      </div>
    </div>

    <div class="p-md" style="margin-top:1rem; background: var(--bg-tertiary); border-radius: 8px;">
      <label class="text-sm">Optional: Add brief note (e.g. anticoagulants, implant):</label>
      <input id="qr-note" type="text" class="block" placeholder="e.g., On warfarin; Pacemaker present" style="margin-top:6px; padding:.5rem;">
    </div>

    <details style="margin-top:1rem;">
      <summary class="text-sm">Show data that will be encoded (read‑only)</summary>
      <pre id="qr-payload-preview" class="text-sm" style="white-space: pre-wrap; background: #0b10211a; padding: .75rem; border-radius:8px; margin-top:.5rem;"></pre>
    </details>
  </div>

  <div class="card">
    <h2>Usage Tips</h2>
    <ul class="text-sm">
      <li>Print on a wallet card, phone lock‑screen, bracelet tag.</li>
      <li>Use high contrast (dark code on white background).</li>
      <li>Minimum size ~2–3 cm square for reliable scanning; test with multiple phones.[web:121][web:123]</li>
      <li>Keep information concise; update after any medication/diagnosis change.[web:122][web:125]</li>
    </ul>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
<script src="app.js"></script>[1][2][3]
</body>
</html>